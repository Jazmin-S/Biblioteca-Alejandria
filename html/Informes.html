<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Informes | Biblioteca de Alejandr√≠a</title>
  <link rel="stylesheet" href="/css/cssAdmin/Informes.css"/>

  <!-- Librer√≠as PDF -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.8.2/jspdf.plugin.autotable.min.js"></script>
</head>
<body>
  <!-- Bot√≥n volver -->
  <button id="btnVolver" class="btn muted volver-fixed">Volver</button>

  <header class="header">
    <div class="brand">
      <div class="logo">üìö</div>
      <div class="brand-text">
        <h1 class="title">Informes</h1>
        <p class="subtitle">Panel mensual - Biblioteca de Alejandr√≠a</p>
      </div>
    </div>

    <div class="actions">
      <label class="field">
        <span>Mes</span>
        <select id="selectMes">
          <option value="1">Enero</option><option value="2">Febrero</option>
          <option value="3">Marzo</option><option value="4">Abril</option>
          <option value="5">Mayo</option><option value="6">Junio</option>
          <option value="7">Julio</option><option value="8">Agosto</option>
          <option value="9">Septiembre</option><option value="10">Octubre</option>
          <option value="11">Noviembre</option><option value="12">Diciembre</option>
        </select>
      </label>

      <label class="field">
        <span>A√±o</span>
        <input id="inputAnio" type="number" min="2000" max="2100" />
      </label>

      <button id="btnAplicar" class="btn primary">Aplicar</button>
      <button id="btnReporteGeneral" class="btn wine">üìÑ Generar PDF General</button>
    </div>
  </header>

  <main class="grid">
    <!-- Resumen general -->
    <section class="card">
      <h2 class="card-title">Informe General</h2>
      <div class="kpis">
        <div class="kpi"><span id="kpiUsuarios">0</span><small>Usuarios totales</small></div>
        <div class="kpi"><span id="kpiLibros">0</span><small>Libros totales</small></div>
        <div class="kpi"><span id="kpiPrestamosMes">0</span><small>Pr√©stamos del mes</small></div>
        <div class="kpi kpi-ok"><span id="kpiEntregados">0</span><small>Entregados (mes)</small></div>
        <div class="kpi kpi-warn"><span id="kpiVencidosMes">0</span><small>Vencidos (mes)</small></div>
        <div class="kpi kpi-warn"><span id="kpiVencidosGlobal">0</span><small>Vencidos globales</small></div>
      </div>

      <h3 class="block-title">Pr√©stamos por d√≠a</h3>
      <div class="table-wrap">
        <table id="tblPrestamosDia" class="table">
          <thead><tr><th>Fecha</th><th>Usuario</th><th>Libro</th><th>Cantidad</th></tr></thead>
          <tbody></tbody>
        </table>
      </div>

      <h3 class="block-title">Top 5 libros m√°s prestados</h3>
      <div class="table-wrap">
        <table id="tblTopLibros" class="table">
          <thead><tr><th>Libro</th><th>Autor</th><th>Total</th></tr></thead>
          <tbody></tbody>
        </table>
      </div>
    </section>

    <!-- Usuarios -->
    <section class="card">
      <h2 class="card-title">Usuarios</h2>
      <div class="table-wrap">
        <table id="tblUsuarios" class="table">
          <thead><tr><th>ID</th><th>Nombre</th><th>Correo</th><th>Rol</th><th>Pr√©stamos</th></tr></thead>
          <tbody></tbody>
        </table>
      </div>
    </section>

    <!-- Pr√©stamos del mes -->
    <section class="card">
      <div class="title-row">
        <h2 class="card-title">Pr√©stamos (mes)</h2>
        <div class="chips">
          <span class="chip chip-warn">Vencidos: <b id="chipVencidos">0</b></span>
          <span class="chip chip-ok">Entregados: <b id="chipEntregados">0</b></span>
        </div>
      </div>
      <div class="table-wrap">
        <table id="tblPrestamos" class="table">
          <thead><tr><th>ID</th><th>Fecha</th><th>Vencimiento</th><th>Usuario</th><th># Libros</th><th>Estado</th></tr></thead>
          <tbody></tbody>
        </table>
      </div>
    </section>

    <!-- Entregados -->
    <section class="card">
      <h2 class="card-title">Pr√©stamos Entregados (mes)</h2>
      <div class="table-wrap">
        <table id="tblPrestamosEntregados" class="table">
          <thead><tr><th>ID</th><th>Fecha</th><th>Vencimiento</th><th>Usuario</th><th># Libros</th><th>Estado</th></tr></thead>
          <tbody></tbody>
        </table>
      </div>
    </section>

    <!-- Vencidos -->
    <section class="card">
      <h2 class="card-title">Pr√©stamos Vencidos (mes)</h2>
      <div class="table-wrap">
        <table id="tblPrestamosVencidos" class="table">
          <thead><tr><th>ID</th><th>Fecha</th><th>Vencimiento</th><th>Usuario</th><th># Libros</th><th>Estado</th></tr></thead>
          <tbody></tbody>
        </table>
      </div>
    </section>

    <!-- Vencidos global -->
    <section class="card">
      <div class="title-row">
        <h2 class="card-title">Vencidos vigentes (global)</h2>
        <div class="chips"><span class="chip chip-warn">Total: <b id="chipVencidosGlobal">0</b></span></div>
      </div>
      <div class="table-wrap">
        <table id="tblVencidosGlobal" class="table">
          <thead><tr><th>ID</th><th>Fecha</th><th>Vencimiento</th><th>Usuario</th><th># Libros</th><th>Mes pr√©stamo</th><th>Estado</th></tr></thead>
          <tbody></tbody>
        </table>
      </div>
    </section>

    <!-- Libros -->
    <section class="card" id="cardLibros">
      <h2 class="card-title">Libros</h2>
      <div class="table-wrap">
        <table id="tblLibros" class="table">
          <thead><tr><th>ID</th><th>T√≠tulo</th><th>Autor</th><th>Categor√≠a</th><th>Ejemplares</th><th>Pr√©stamos totales</th></tr></thead>
          <tbody></tbody>
        </table>
      </div>
    </section>
  </main>

  <footer class="footer">
    <span>Biblioteca de Alejandr√≠a ¬∑ Informes</span>
  </footer>

  <script src="/jsAdmin/Informes.js"></script>
</body>
</html>
